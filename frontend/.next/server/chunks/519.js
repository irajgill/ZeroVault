"use strict";exports.id=519,exports.ids=[519],exports.modules={763:(e,t,a)=>{a.d(t,{Z:()=>r});const r=(0,a(6557).Z)("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},1399:(e,t,a)=>{a.d(t,{Z:()=>g});var r=a(326),s=a(7577),n=a(6557);const l=(0,n.Z)("PackageOpen",[["path",{d:"M20.91 8.84 8.56 2.23a1.93 1.93 0 0 0-1.81 0L3.1 4.13a2.12 2.12 0 0 0-.05 3.69l12.22 6.93a2 2 0 0 0 1.94 0L21 12.51a2.12 2.12 0 0 0-.09-3.67Z",key:"1vy178"}],["path",{d:"m3.09 8.84 12.35-6.61a1.93 1.93 0 0 1 1.81 0l3.65 1.9a2.12 2.12 0 0 1 .1 3.69L8.73 14.75a2 2 0 0 1-1.94 0L3 12.51a2.12 2.12 0 0 1 .09-3.67Z",key:"s3bv25"}],["line",{x1:"12",x2:"12",y1:"22",y2:"13",key:"1o4xyi"}],["path",{d:"M20 13.5v3.37a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13.5",key:"1na2nq"}]]);var i=a(763),o=a(7027);const c=(0,n.Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),d=(0,n.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),x=(0,n.Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),m=(0,n.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),u=(0,n.Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),p={sm:{text:"text-xs",pad:"px-2 py-0.5",icon:"h-3.5 w-3.5"},md:{text:"text-sm",pad:"px-2.5 py-1",icon:"h-4 w-4"},lg:{text:"text-base",pad:"px-3 py-1.5",icon:"h-5 w-5"}};function h({score:e,size:t="md",className:a=""}){const n=p[t],l=(0,s.useMemo)((()=>function(e){return e>=90?`Excellent (${e})`:e>=80?`Good (${e})`:e>=70?`Fair (${e})`:`Low (${e})`}(Math.max(0,Math.min(100,Math.round(e))))),[e]),i=(0,s.useMemo)((()=>function(e){return e>=90?{bg:"bg-emerald-500/10",text:"text-emerald-300",ring:"ring-emerald-400/30",icon:"text-emerald-400"}:e>=80?{bg:"bg-blue-500/10",text:"text-blue-300",ring:"ring-blue-400/30",icon:"text-blue-400"}:e>=70?{bg:"bg-yellow-500/10",text:"text-yellow-300",ring:"ring-yellow-400/30",icon:"text-yellow-400"}:{bg:"bg-red-500/10",text:"text-red-300",ring:"ring-red-400/30",icon:"text-red-400"}}(e)),[e]);return(0,r.jsxs)("span",{className:`inline-flex items-center gap-1.5 rounded-full ${n.pad} ${n.text} ${i.bg} ${i.text} ring-1 ring-inset ${i.ring} ${a}`,title:`Quality score ${e}/100`,children:[r.jsx(u,{className:`${n.icon} ${i.icon}`,"aria-hidden":"true"}),r.jsx("span",{className:"font-medium",children:l})]})}var y=a(1223);a(537);function g({id:e,name:t,description:a,creator:n,price:u,qualityScore:p,blobId:g,verifiedDomain:f,onPurchase:b,onDownload:w}){const[j,k]=(0,s.useState)(!1),[v,N]=(0,s.useState)(!1),[$,Z]=(0,s.useState)("idle"),A=(0,s.useMemo)((()=>Boolean(w)),[w]);return(0,r.jsxs)("div",{className:"rounded-lg border border-white/10 bg-white/5 p-4 hover:bg-white/10 transition",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"rounded-md bg-white/10 p-2",children:r.jsx(l,{className:"h-5 w-5 text-blue-300"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-base font-semibold text-white",children:t}),r.jsx("p",{className:"mt-1 text-sm text-gray-300 line-clamp-3",children:a}),(0,r.jsxs)("div",{className:"mt-2 flex flex-col gap-1 text-xs text-gray-400",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsxs)("span",{children:["Creator: ",(0,y.FP)(n)]}),f?(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-500/10 px-2 py-0.5 text-[11px] text-emerald-300 ring-1 ring-emerald-500/30",children:[r.jsx(i.Z,{className:"h-3 w-3"}),"Verified @",f]}):null]}),r.jsx("div",{className:"flex flex-wrap items-center gap-2",children:g?(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{className:"text-gray-400",children:"Walrus blob:"}),(0,r.jsxs)("a",{href:`https://walruscan.com/testnet/blob/${encodeURIComponent(g)}`,target:"_blank",rel:"noreferrer",className:"font-mono text-[11px] text-blue-300 hover:text-blue-100 underline decoration-dotted",title:g,children:[g.length>16?`${g.slice(0,8)}\u2026${g.slice(-6)}`:g,r.jsx(o.Z,{className:"ml-1 inline-block h-3 w-3"})]})]}):r.jsx("span",{className:"text-xs text-gray-500",children:"No Walrus blob yet"})}),r.jsx("div",{className:"flex items-center gap-2",children:"available"===$?(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-500/10 px-2 py-0.5 text-[11px] text-emerald-300 ring-1 ring-emerald-500/30",children:[r.jsx(c,{className:"h-3 w-3"}),"Walrus: available"]}):"unavailable"===$?(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-yellow-500/10 px-2 py-0.5 text-[11px] text-yellow-300 ring-1 ring-yellow-500/30",children:[r.jsx(d,{className:"h-3 w-3"}),"Walrus: not yet available (testnet propagation)"]}):"error"===$?(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-500/10 px-2 py-0.5 text-[11px] text-red-300 ring-1 ring-red-500/30",children:[r.jsx(d,{className:"h-3 w-3"}),"Walrus status unknown"]}):r.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-white/5 px-2 py-0.5 text-[11px] text-gray-300 ring-1 ring-white/10",children:"Checking Walrus\u2026"})})]})]})]}),r.jsx(h,{score:Number(p||0),size:"sm"})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-between gap-3",children:[r.jsx("span",{className:"text-sm text-gray-200",children:(0,y.sc)(u)}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("button",{type:"button",disabled:!b||j,onClick:async()=>{if(b)try{k(!0),await b()}finally{k(!1)}},className:"inline-flex items-center gap-2 rounded-md bg-blue-600 px-3 py-1.5 text-sm font-medium text-white disabled:opacity-50 hover:bg-blue-500",children:[r.jsx(x,{className:"h-4 w-4"}),j?"Confirming\u2026":"Purchase access"]}),(0,r.jsxs)("button",{type:"button",disabled:!A||v,onClick:async()=>{if(w)try{N(!0),await w()}finally{N(!1)}},className:"inline-flex items-center gap-2 rounded-md bg-purple-600 px-3 py-1.5 text-sm font-medium text-white disabled:opacity-50 hover:bg-purple-500",children:[r.jsx(m,{className:"h-4 w-4"}),v?"Decrypting\u2026":"Secure download"]})]})]})]})}},9609:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(326),s=(a(7577),a(5290));const n={sm:"h-5 w-5",md:"h-8 w-8",lg:"h-12 w-12"};function l({size:e="md",message:t,className:a=""}){const l=n[e];return(0,r.jsxs)("div",{className:`flex flex-col items-center justify-center text-gray-300 ${a}`,role:"status","aria-live":"polite","aria-busy":"true",children:[r.jsx(s.Z,{className:`animate-spin text-blue-500 ${l}`}),t?r.jsx("p",{className:"mt-2 text-sm text-gray-400 text-center",children:t}):null]})}},659:(e,t,a)=>{a.d(t,{ZP:()=>o});var r=a(2633),s=a(2714),n=a(413);async function l(){const e=`${n.z0}/api/datasets`;try{const{data:t}=await s.Z.get(e,{timeout:2e4}),a=Array.isArray(t)?t:t?.data;return Array.isArray(a)?a:[]}catch(t){throw i(t,"Failed to fetch datasets")}}function i(e,t){if(s.Z.isAxiosError(e)){const a=e,r=a.response?.status?` [HTTP ${a.response.status}]`:"",s=a.message||"network error";return new Error(`${t}: ${s}${r}`)}return new Error(`${t}: ${e?.message||String(e)}`)}const o=function(){const e=(0,r.a)({queryKey:["datasets"],queryFn:l,staleTime:3e4,retry:1});return{datasets:e.data||[],isLoading:e.isLoading||e.isFetching,error:e.error?e.error.message:null,refetch:e.refetch}}},5685:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(7577),s=a(2714),n=a(1385),l=a.n(n),i=a(413);const o=function(){const[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[d,x]=(0,r.useState)(null),[m,u]=(0,r.useState)(null),p=(0,r.useCallback)((()=>{t(!1),n(null),c(null),x(null),u(null)}),[]),h=(0,r.useCallback)((async e=>{if(!e)throw new Error("dataset id is required");t(!0),n(null),c(null),x(null),u(null);try{const t=l().box.keyPair(),a=Buffer.from(t.publicKey).toString("base64"),r=`${i.z0}/api/datasets/secure-download/${encodeURIComponent(e)}`,{data:n}=await s.Z.post(r,{recipientPublicKeyB64:a},{timeout:2e4}),o=Buffer.from(n.nonce_b64,"base64"),d=Buffer.from(n.ciphertext_b64,"base64");n.original_filename&&x(n.original_filename),n.content_type&&u(n.content_type);const m=n.wrapped_key,p=Buffer.from(m.serverPublicKeyB64,"base64"),h=Buffer.from(m.boxB64,"base64"),y=Buffer.from(m.nonceB64,"base64");if(p.length!==l().box.publicKeyLength)throw new Error("Invalid ephemeral public key length");const g=l().box.open(new Uint8Array(h),new Uint8Array(y),new Uint8Array(p),t.secretKey);if(!g)throw new Error("Failed to unwrap dataset key");if(g.length!==l().secretbox.keyLength)throw new Error("Unwrapped key has unexpected length");const f=l().secretbox.open(new Uint8Array(d),new Uint8Array(o),g);if(!f)throw new Error("Failed to decrypt ciphertext");const b=new Uint8Array(f);return c(b),b}catch(a){const e=a.message||"Secure download failed";throw n(e),a}finally{t(!1)}}),[]);return(0,r.useMemo)((()=>({downloading:e,error:a,plaintext:o,filename:d,contentType:m,downloadAndDecrypt:h,reset:p})),[e,a,o,d,m,h,p])}},9807:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(7577),s=a(2714),n=a(413),l=a(1223);function i(e){const[t,a]=(0,r.useState)([]),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),x=(0,r.useCallback)((async()=>{if(e){o(!0),d(null);try{const t=`${n.z0}/api/zkemail/attestations/${encodeURIComponent(e)}`,{data:r}=await s.Z.get(t,{timeout:15e3});a(Array.isArray(r)?r:[])}catch(t){const e=t.message||"Failed to load zkEmail attestations";d(e)}finally{o(!1)}}}),[e]),m=(0,r.useCallback)((async(t,r)=>{if(!e)throw new Error("Connect your wallet to record a zkEmail attestation");const i=(t||"").trim().toLowerCase();if(!i||!/^[^@]+@[^@]+\.[^@]+$/.test(i))throw new Error("Enter a valid email address");const o=i.split("@")[1],c=await(0,l.Mp)(i),d={address:e,emailHash:c,domain:o,transactionDigest:r.trim()},x=`${n.z0}/api/zkemail/attest`,{data:m}=await s.Z.post(x,d,{timeout:2e4});return a((e=>[m,...e])),m}),[e]);return(0,r.useMemo)((()=>({attestations:t,loading:i,error:c,refresh:x,createAttestation:m})),[t,i,c,x,m])}}};