(()=>{var e={id:702,ids:[702]};e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7839:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},6139:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>l});s(8256),s(5495),s(7629),s(2523);var a=s(3191),r=s(8716),i=s(7922),n=s.n(i),o=s(5231),d={};for(const p in o)["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(p)<0&&(d[p]=()=>o[p]);s.d(t,d);const l=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8256)),"/home/raj/zkDataVault/frontend/src/app/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5495)),"/home/raj/zkDataVault/frontend/src/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,7629)),"/home/raj/zkDataVault/frontend/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,2523)),"/home/raj/zkDataVault/frontend/src/app/not-found.tsx"]}],c=["/home/raj/zkDataVault/frontend/src/app/dashboard/page.tsx"],u="/dashboard/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},5497:(e,t,s)=>{Promise.resolve().then(s.bind(s,213))},213:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w,dynamic:()=>j});var a=s(326),r=s(7577),i=s(5842),n=s(1223),o=s(8025),d=s(413),l=s(7062),c=(s(659),s(9609)),u=s(4295),m=s(1399),x=s(5685),p=s(6796),h=s(6557);const g=(0,h.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var y=s(763);const b=(0,h.Z)("Layers3",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m6.08 9.5-3.5 1.6a1 1 0 0 0 0 1.81l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9a1 1 0 0 0 0-1.83l-3.5-1.59",key:"1e5n1m"}],["path",{d:"m6.08 14.5-3.5 1.6a1 1 0 0 0 0 1.81l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9a1 1 0 0 0 0-1.83l-3.5-1.59",key:"1iwflc"}]]);var f=s(9807);const j="force-dynamic";function w(){const e=(0,i.t)(),t=e?.address||"",[s,h]=(0,r.useState)(!1),[j,w]=(0,r.useState)({loading:!1,error:null,items:[]}),[v,N]=(0,r.useState)(null),{executeTransaction:k,waitForTransaction:_}=(0,o.Z)(),{downloading:q,error:z,plaintext:D,filename:P,contentType:E,downloadAndDecrypt:S,reset:Z}=(0,x.Z)(),{attestations:C,loading:V,error:L,createAttestation:T}=(0,f.Z)(t||void 0),[$,A]=(0,r.useState)(""),[F,M]=(0,r.useState)(""),[R,G]=(0,r.useState)(!1),[I,U]=(0,r.useState)(null),[Y,W]=(0,r.useState)(null);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("header",{children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Your ZeroVault"}),a.jsx("p",{className:"mt-1 text-gray-300",children:t?(0,a.jsxs)(a.Fragment,{children:["Connected as"," ",a.jsx("span",{className:"font-medium text-white",children:(0,n.FP)(t)}),". Manage the datasets you've uploaded and decrypt previews after secure purchase."]}):"Connect your wallet to view and manage your datasets."})]}),Y?a.jsx("div",{className:"mt-4",children:a.jsx(p.Z,{status:Y.status,digest:Y.digest,message:Y.message})}):null,t?(0,a.jsxs)("section",{className:"rounded-lg border border-white/10 bg-white/5 p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"rounded-md bg-white/10 p-2",children:a.jsx(g,{className:"h-4 w-4 text-blue-300"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-gray-100",children:"zkEmail creator verification"}),a.jsx("p",{className:"text-xs text-gray-300",children:"Prove you control an email address off-chain with zkEmail, then record the attestation here to show a verified creator badge."})]})]}),C.length>0?(0,a.jsxs)("div",{className:"flex items-center gap-1 rounded-full border border-emerald-500/40 bg-emerald-500/10 px-3 py-1 text-[11px] text-emerald-200",children:[a.jsx(y.Z,{className:"h-3.5 w-3.5"}),(0,a.jsxs)("span",{children:["Verified: @",C[0].domain]})]}):a.jsx("span",{className:"text-[11px] text-gray-400",children:"No zkEmail attestation yet"})]}),(0,a.jsxs)("form",{onSubmit:async function(e){if(e.preventDefault(),t){U(null);try{G(!0);const e=F.trim(),t=$.trim().toLowerCase();W({status:"pending",digest:e||void 0,message:"Verifying zkEmail transaction on Sui and recording attestation\u2026"}),await T(t,e),A(""),M(""),W({status:"success",digest:e||void 0,message:`zkEmail attestation recorded for ${t}. This transaction belongs to your wallet and succeeded on Sui.`})}catch(s){U(s.message||"Failed to record zkEmail attestation"),W({status:"failed",digest:F.trim()||void 0,message:s.message||"Failed to verify zkEmail transaction or record attestation"})}finally{G(!1)}}},className:"mt-2 grid grid-cols-1 gap-3 sm:grid-cols-[2fr_2fr_auto]",children:[a.jsx("input",{type:"email",placeholder:"you@example.com",value:$,onChange:e=>A(e.target.value),className:"rounded-md border border-white/10 bg-black/40 px-3 py-2 text-xs text-gray-100 placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("input",{type:"text",placeholder:"Sui tx digest from zkEmail verification",value:F,onChange:e=>M(e.target.value),className:"rounded-md border border-white/10 bg-black/40 px-3 py-2 text-xs text-gray-100 placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("button",{type:"submit",disabled:R||!$||!F,className:"rounded-md bg-blue-600 px-4 py-2 text-xs font-medium text-white disabled:opacity-50 hover:bg-blue-500",children:R?"Saving\u2026":"Record zkEmail"})]}),V?a.jsx("p",{className:"text-[11px] text-gray-400",children:"Loading existing attestations\u2026"}):null,L||I?a.jsx("p",{className:"text-[11px] text-red-300",children:I||L}):null,C.length>0?(0,a.jsxs)("div",{className:"mt-2 space-y-1 text-[11px] text-gray-400",children:[a.jsx("p",{className:"font-semibold text-gray-300",children:"Recent attestations"}),C.slice(0,2).map((e=>(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-gray-200",children:["@",e.domain]}),(0,a.jsxs)("span",{className:"text-gray-500",children:["\xb7 ",(0,n.i$)(new Date(e.created_at).getTime())]}),a.jsx("a",{href:`https://explorer.sui.io/txblock/${e.transaction_digest}?network=${encodeURIComponent("testnet".toLowerCase())}`,target:"_blank",rel:"noreferrer",className:"underline decoration-dotted hover:text-gray-200",children:"View tx"})]},e.id)))]}):null]}):null,v?a.jsx("div",{className:"sticky top-4 z-10",children:a.jsx(p.Z,{status:v.status,digest:v.digest,message:v.message})}):null,t?j.loading?a.jsx("div",{className:"mt-4",children:a.jsx(c.Z,{message:"Loading your datasets..."})}):j.error?a.jsx("div",{className:"mt-4",children:a.jsx(u.Z,{error:j.error})}):(0,a.jsxs)("section",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-200 uppercase tracking-wide",children:"Your datasets"}),a.jsx("a",{href:"/upload",className:"text-xs rounded-md border border-white/10 bg-white/5 px-2.5 py-1 text-gray-100 hover:bg-white/10",children:"Upload new"})]}),0===j.items.length?(0,a.jsxs)("div",{className:"rounded-lg border border-dashed border-white/15 bg-white/5 p-4 text-sm text-gray-300",children:["You haven\\'t uploaded any datasets yet."," ",a.jsx("a",{href:"/upload",className:"font-medium text-blue-400 hover:text-blue-300",children:"Upload your first dataset"})," ","to mint a new ZeroVault entry backed by ZK proofs."]}):a.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:j.items.map((e=>(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(m.Z,{id:e.id,name:e.name,description:e.description,creator:e.creator,price:e.price,qualityScore:Number(e.quality_score||0),blobId:e.blob_id,verifiedDomain:C[0]?.domain,onDownload:()=>async function(e){await S(e.id)}(e)}),(0,a.jsxs)("button",{type:"button",disabled:!t,onClick:()=>async function(e){if(!s)throw new Error("Wallet not ready");if(!t)throw new Error("Connect your wallet to list");if(!d.lD.package||!d.lD.marketplace)throw new Error("Marketplace contract IDs are not configured");const a=(0,n.z8)(await(0,n.Mp)(e.id)),r=(new TextEncoder).encode(e.blob_id||""),i=BigInt(e.price||"0"),o=Number(e.quality_score||0),c=(0,n.z8)("string"===typeof e.seal_policy_id&&e.seal_policy_id.startsWith("0x")?e.seal_policy_id:`0x${e.seal_policy_id}`),u=(0,n.z8)(d.lD.marketplace),m=new l.Y;m.moveCall({target:`${(0,n.z8)(d.lD.package)}::marketplace::list_dataset`,arguments:[m.object(u),m.pure.address(a),m.pure.u64(i),m.pure.vector("u8",Array.from(r)),m.pure.address(c),m.pure.u8(o)]}),N({status:"pending",message:`Listing "${e.name}" on-chain\u2026`});try{const t=await k(m);N({status:"pending",digest:t,message:`Listing "${e.name}" on-chain\u2026`}),await _(t),N({status:"success",digest:t,message:`Dataset "${e.name}" successfully listed on-chain. This is a real Sui transaction.`})}catch(x){throw N({status:"failed",message:x.message??"Failed to list dataset on-chain"}),x}}(e),className:"inline-flex items-center justify-center gap-1.5 rounded-md border border-white/10 bg-white/5 px-3 py-1.5 text-[11px] font-medium text-gray-100 hover:bg-white/10 disabled:opacity-50",children:[a.jsx(b,{className:"h-3.5 w-3.5"}),"List on-chain"]})]},e.id)))})]}):null,v?a.jsx("div",{className:"mt-4",children:a.jsx(p.Z,{status:v.status,digest:v.digest,message:v.message})}):null,z?a.jsx("div",{className:"mt-4",children:a.jsx(u.Z,{error:z,onRetry:Z})}):null,D?(0,a.jsxs)("div",{className:"mt-4 rounded-md border border-white/10 bg-white/5 p-3",children:[a.jsx("p",{className:"mb-1 text-xs text-gray-300",children:"Decrypted preview (first 256 bytes, UTF-8):"}),a.jsx("pre",{className:"max-h-40 overflow-auto whitespace-pre-wrap break-all text-xs text-gray-100",children:(new TextDecoder).decode(D.subarray(0,256))})]}):null]})}},8256:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,dynamic:()=>r});var a=s(8570);const r=(0,a.createProxy)(String.raw`/home/raj/zkDataVault/frontend/src/app/dashboard/page.tsx#dynamic`),i=(0,a.createProxy)(String.raw`/home/raj/zkDataVault/frontend/src/app/dashboard/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=t.X(0,[42,538,8,519],(()=>{return e=6139,t(t.s=e);var e}));module.exports=s})();