"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[62],{4286:function(e,t,a){a.d(t,{Z:function(){return n}});const n=(0,a(9763).Z)("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},9306:function(e,t,a){a.d(t,{Z:function(){return f}});var n=a(7437),r=a(2265),s=a(9763);const i=(0,s.Z)("PackageOpen",[["path",{d:"M20.91 8.84 8.56 2.23a1.93 1.93 0 0 0-1.81 0L3.1 4.13a2.12 2.12 0 0 0-.05 3.69l12.22 6.93a2 2 0 0 0 1.94 0L21 12.51a2.12 2.12 0 0 0-.09-3.67Z",key:"1vy178"}],["path",{d:"m3.09 8.84 12.35-6.61a1.93 1.93 0 0 1 1.81 0l3.65 1.9a2.12 2.12 0 0 1 .1 3.69L8.73 14.75a2 2 0 0 1-1.94 0L3 12.51a2.12 2.12 0 0 1 .09-3.67Z",key:"s3bv25"}],["line",{x1:"12",x2:"12",y1:"22",y2:"13",key:"1o4xyi"}],["path",{d:"M20 13.5v3.37a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13.5",key:"1na2nq"}]]);var l=a(4286),c=a(6362);const o=(0,s.Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),d=(0,s.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),u=(0,s.Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),x=(0,s.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),m=(0,s.Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),p={sm:{text:"text-xs",pad:"px-2 py-0.5",icon:"h-3.5 w-3.5"},md:{text:"text-sm",pad:"px-2.5 py-1",icon:"h-4 w-4"},lg:{text:"text-base",pad:"px-3 py-1.5",icon:"h-5 w-5"}};function h(e){let{score:t,size:a="md",className:s=""}=e;const i=p[a],l=(0,r.useMemo)((()=>function(e){return e>=90?"Excellent (".concat(e,")"):e>=80?"Good (".concat(e,")"):e>=70?"Fair (".concat(e,")"):"Low (".concat(e,")")}(Math.max(0,Math.min(100,Math.round(t))))),[t]),c=(0,r.useMemo)((()=>function(e){return e>=90?{bg:"bg-emerald-500/10",text:"text-emerald-300",ring:"ring-emerald-400/30",icon:"text-emerald-400"}:e>=80?{bg:"bg-blue-500/10",text:"text-blue-300",ring:"ring-blue-400/30",icon:"text-blue-400"}:e>=70?{bg:"bg-yellow-500/10",text:"text-yellow-300",ring:"ring-yellow-400/30",icon:"text-yellow-400"}:{bg:"bg-red-500/10",text:"text-red-300",ring:"ring-red-400/30",icon:"text-red-400"}}(t)),[t]);return(0,n.jsxs)("span",{className:"inline-flex items-center gap-1.5 rounded-full ".concat(i.pad," ").concat(i.text," ").concat(c.bg," ").concat(c.text," ring-1 ring-inset ").concat(c.ring," ").concat(s),title:"Quality score ".concat(t,"/100"),children:[(0,n.jsx)(m,{className:"".concat(i.icon," ").concat(c.icon),"aria-hidden":"true"}),(0,n.jsx)("span",{className:"font-medium",children:l})]})}var y=a(3448),g=a(5820);function f(e){let{id:t,name:a,description:s,creator:m,price:p,qualityScore:f,blobId:b,verifiedDomain:w,onPurchase:v,onDownload:k}=e;const[j,N]=(0,r.useState)(!1),[Z,A]=(0,r.useState)(!1),[C,E]=(0,r.useState)("idle");(0,r.useEffect)((()=>{let e=!1;return async function(){if(b)try{E("checking");const t=await(0,g.IH)(b);e||E(t?"available":"unavailable")}catch(t){e||E("error")}}(),()=>{e=!0}}),[b]);const S=(0,r.useMemo)((()=>Boolean(k)),[k]);return(0,n.jsxs)("div",{className:"rounded-lg border border-white/10 bg-white/5 p-4 hover:bg-white/10 transition",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"rounded-md bg-white/10 p-2",children:(0,n.jsx)(i,{className:"h-5 w-5 text-blue-300"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-base font-semibold text-white",children:a}),(0,n.jsx)("p",{className:"mt-1 text-sm text-gray-300 line-clamp-3",children:s}),(0,n.jsxs)("div",{className:"mt-2 flex flex-col gap-1 text-xs text-gray-400",children:[(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,n.jsxs)("span",{children:["Creator: ",(0,y.FP)(m)]}),w?(0,n.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-500/10 px-2 py-0.5 text-[11px] text-emerald-300 ring-1 ring-emerald-500/30",children:[(0,n.jsx)(l.Z,{className:"h-3 w-3"}),"Verified @",w]}):null]}),(0,n.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:b?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Walrus blob:"}),(0,n.jsxs)("a",{href:"https://walruscan.com/testnet/blob/".concat(encodeURIComponent(b)),target:"_blank",rel:"noreferrer",className:"font-mono text-[11px] text-blue-300 hover:text-blue-100 underline decoration-dotted",title:b,children:[b.length>16?"".concat(b.slice(0,8),"\u2026").concat(b.slice(-6)):b,(0,n.jsx)(c.Z,{className:"ml-1 inline-block h-3 w-3"})]})]}):(0,n.jsx)("span",{className:"text-xs text-gray-500",children:"No Walrus blob yet"})}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:"available"===C?(0,n.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-500/10 px-2 py-0.5 text-[11px] text-emerald-300 ring-1 ring-emerald-500/30",children:[(0,n.jsx)(o,{className:"h-3 w-3"}),"Walrus: available"]}):"unavailable"===C?(0,n.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-yellow-500/10 px-2 py-0.5 text-[11px] text-yellow-300 ring-1 ring-yellow-500/30",children:[(0,n.jsx)(d,{className:"h-3 w-3"}),"Walrus: not yet available (testnet propagation)"]}):"error"===C?(0,n.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-500/10 px-2 py-0.5 text-[11px] text-red-300 ring-1 ring-red-500/30",children:[(0,n.jsx)(d,{className:"h-3 w-3"}),"Walrus status unknown"]}):(0,n.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full bg-white/5 px-2 py-0.5 text-[11px] text-gray-300 ring-1 ring-white/10",children:"Checking Walrus\u2026"})})]})]})]}),(0,n.jsx)(h,{score:Number(f||0),size:"sm"})]}),(0,n.jsxs)("div",{className:"mt-4 flex items-center justify-between gap-3",children:[(0,n.jsx)("span",{className:"text-sm text-gray-200",children:(0,y.sc)(p)}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("button",{type:"button",disabled:!v||j,onClick:async()=>{if(v)try{N(!0),await v()}finally{N(!1)}},className:"inline-flex items-center gap-2 rounded-md bg-blue-600 px-3 py-1.5 text-sm font-medium text-white disabled:opacity-50 hover:bg-blue-500",children:[(0,n.jsx)(u,{className:"h-4 w-4"}),j?"Confirming\u2026":"Purchase access"]}),(0,n.jsxs)("button",{type:"button",disabled:!S||Z,onClick:async()=>{if(k)try{A(!0),await k()}finally{A(!1)}},className:"inline-flex items-center gap-2 rounded-md bg-purple-600 px-3 py-1.5 text-sm font-medium text-white disabled:opacity-50 hover:bg-purple-500",children:[(0,n.jsx)(x,{className:"h-4 w-4"}),Z?"Decrypting\u2026":"Secure download"]})]})]})]})}},336:function(e,t,a){a.d(t,{Z:function(){return i}});var n=a(7437),r=(a(2265),a(5863));const s={sm:"h-5 w-5",md:"h-8 w-8",lg:"h-12 w-12"};function i(e){let{size:t="md",message:a,className:i=""}=e;const l=s[t];return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-300 ".concat(i),role:"status","aria-live":"polite","aria-busy":"true",children:[(0,n.jsx)(r.Z,{className:"animate-spin text-blue-500 ".concat(l)}),a?(0,n.jsx)("p",{className:"mt-2 text-sm text-gray-400 text-center",children:a}):null]})}},2567:function(e,t,a){a.d(t,{Bz:function(){return l}});var n=a(8181),r=a(6869),s=a(3976);async function i(){const e="".concat(s.z0,"/api/datasets");try{const{data:t}=await r.Z.get(e,{timeout:2e4}),a=Array.isArray(t)?t:null===t||void 0===t?void 0:t.data;return Array.isArray(a)?a:[]}catch(t){throw c(t,"Failed to fetch datasets")}}async function l(e){if(!e)throw new Error("address is required");const t="".concat(s.z0,"/api/datasets/user/").concat(encodeURIComponent(e));try{const{data:e}=await r.Z.get(t,{timeout:2e4});return(Array.isArray(e)?e:null===e||void 0===e?void 0:e.data)||[]}catch(a){throw c(a,"Failed to fetch datasets for ".concat(e))}}function c(e,t){if(r.Z.isAxiosError(e)){var a;const n=e,r=(null===(a=n.response)||void 0===a?void 0:a.status)?" [HTTP ".concat(n.response.status,"]"):"",s=n.message||"network error";return new Error("".concat(t,": ").concat(s).concat(r))}return new Error("".concat(t,": ").concat((null===e||void 0===e?void 0:e.message)||String(e)))}t.ZP=function(){const e=(0,n.a)({queryKey:["datasets"],queryFn:i,staleTime:3e4,retry:1});return{datasets:e.data||[],isLoading:e.isLoading||e.isFetching,error:e.error?e.error.message:null,refetch:e.refetch}}},7541:function(e,t,a){var n=a(2265),r=a(6869),s=a(1280),i=a.n(s),l=a(3976),c=a(6434).Buffer;t.Z=function(){const[e,t]=(0,n.useState)(!1),[a,s]=(0,n.useState)(null),[o,d]=(0,n.useState)(null),[u,x]=(0,n.useState)(null),[m,p]=(0,n.useState)(null),h=(0,n.useCallback)((()=>{t(!1),s(null),d(null),x(null),p(null)}),[]),y=(0,n.useCallback)((async e=>{if(!e)throw new Error("dataset id is required");t(!0),s(null),d(null),x(null),p(null);try{const t=i().box.keyPair(),a=c.from(t.publicKey).toString("base64"),n="".concat(l.z0,"/api/datasets/secure-download/").concat(encodeURIComponent(e)),{data:s}=await r.Z.post(n,{recipientPublicKeyB64:a},{timeout:2e4}),o=c.from(s.nonce_b64,"base64"),u=c.from(s.ciphertext_b64,"base64");s.original_filename&&x(s.original_filename),s.content_type&&p(s.content_type);const m=s.wrapped_key,h=c.from(m.serverPublicKeyB64,"base64"),y=c.from(m.boxB64,"base64"),g=c.from(m.nonceB64,"base64");if(h.length!==i().box.publicKeyLength)throw new Error("Invalid ephemeral public key length");const f=i().box.open(new Uint8Array(y),new Uint8Array(g),new Uint8Array(h),t.secretKey);if(!f)throw new Error("Failed to unwrap dataset key");if(f.length!==i().secretbox.keyLength)throw new Error("Unwrapped key has unexpected length");const b=i().secretbox.open(new Uint8Array(u),new Uint8Array(o),f);if(!b)throw new Error("Failed to decrypt ciphertext");const w=new Uint8Array(b);return d(w),w}catch(a){const e=a.message||"Secure download failed";throw s(e),a}finally{t(!1)}}),[]);return(0,n.useMemo)((()=>({downloading:e,error:a,plaintext:o,filename:u,contentType:m,downloadAndDecrypt:y,reset:h})),[e,a,o,u,m,y,h])}},5382:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(2265),r=a(6869),s=a(3976),i=a(3448);function l(e){const[t,a]=(0,n.useState)([]),[l,c]=(0,n.useState)(!1),[o,d]=(0,n.useState)(null),u=(0,n.useCallback)((async()=>{if(e){c(!0),d(null);try{const t="".concat(s.z0,"/api/zkemail/attestations/").concat(encodeURIComponent(e)),{data:n}=await r.Z.get(t,{timeout:15e3});a(Array.isArray(n)?n:[])}catch(t){const e=t.message||"Failed to load zkEmail attestations";d(e)}finally{c(!1)}}}),[e]);(0,n.useEffect)((()=>{if(!e)return a([]),d(null),void c(!1);u()}),[e,u]);const x=(0,n.useCallback)((async(t,n)=>{if(!e)throw new Error("Connect your wallet to record a zkEmail attestation");const l=(t||"").trim().toLowerCase();if(!l||!/^[^@]+@[^@]+\.[^@]+$/.test(l))throw new Error("Enter a valid email address");const c=l.split("@")[1],o=await(0,i.Mp)(l),d={address:e,emailHash:o,domain:c,transactionDigest:n.trim()},u="".concat(s.z0,"/api/zkemail/attest"),{data:x}=await r.Z.post(u,d,{timeout:2e4});return a((e=>[x,...e])),x}),[e]);return(0,n.useMemo)((()=>({attestations:t,loading:l,error:o,refresh:u,createAttestation:x})),[t,l,o,u,x])}}}]);