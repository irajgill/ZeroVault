"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/dashboard/page",{

/***/ "(app-pages-browser)/./src/hooks/useSecureDownload.ts":
/*!****************************************!*\
  !*** ./src/hooks/useSecureDownload.ts ***!
  \****************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useSecureDownload: function() { return /* binding */ useSecureDownload; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ \"(app-pages-browser)/../node_modules/axios/lib/axios.js\");\n/* harmony import */ var tweetnacl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tweetnacl */ \"(app-pages-browser)/../node_modules/tweetnacl/nacl-fast.js\");\n/* harmony import */ var tweetnacl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tweetnacl__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/constants */ \"(app-pages-browser)/./src/constants/index.ts\");\n/* provided dependency */ var Buffer = __webpack_require__(/*! buffer */ \"(app-pages-browser)/./node_modules/next/dist/compiled/buffer/index.js\")[\"Buffer\"];\n/* __next_internal_client_entry_do_not_use__ useSecureDownload,default auto */ \n\n\n\nfunction useSecureDownload() {\n    const [downloading, setDownloading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [plaintext, setPlaintext] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [filename, setFilename] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [contentType, setContentType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const reset = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        setDownloading(false);\n        setError(null);\n        setPlaintext(null);\n        setFilename(null);\n        setContentType(null);\n    }, []);\n    const downloadAndDecrypt = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (datasetId)=>{\n        if (!datasetId) throw new Error(\"dataset id is required\");\n        setDownloading(true);\n        setError(null);\n        setPlaintext(null);\n        setFilename(null);\n        setContentType(null);\n        try {\n            // Generate an ephemeral recipient keypair for this download (dev-only).\n            // In a real app the user would have a long-lived X25519 key pair tied to their wallet.\n            const recipient = tweetnacl__WEBPACK_IMPORTED_MODULE_1___default().box.keyPair();\n            const recipientPublicKeyB64 = Buffer.from(recipient.publicKey).toString(\"base64\");\n            const url = \"\".concat(_constants__WEBPACK_IMPORTED_MODULE_2__.BACKEND_URL, \"/api/datasets/secure-download/\").concat(encodeURIComponent(datasetId));\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].post(url, {\n                recipientPublicKeyB64\n            }, {\n                timeout: 20000\n            });\n            const nonce = Buffer.from(data.nonce_b64, \"base64\");\n            const ciphertext = Buffer.from(data.ciphertext_b64, \"base64\");\n            if (data.original_filename) {\n                setFilename(data.original_filename);\n            }\n            if (data.content_type) {\n                setContentType(data.content_type);\n            }\n            const ek = data.wrapped_key;\n            const ephemeralPub = Buffer.from(ek.serverPublicKeyB64, \"base64\");\n            const wrappedKeyCiphertext = Buffer.from(ek.boxB64, \"base64\");\n            const keyNonce = Buffer.from(ek.nonceB64, \"base64\");\n            if (ephemeralPub.length !== (tweetnacl__WEBPACK_IMPORTED_MODULE_1___default().box).publicKeyLength) {\n                throw new Error(\"Invalid ephemeral public key length\");\n            }\n            // Derive shared secret using X25519 (NaCl box).\n            const shared = tweetnacl__WEBPACK_IMPORTED_MODULE_1___default().box.open(new Uint8Array(wrappedKeyCiphertext), new Uint8Array(keyNonce), new Uint8Array(ephemeralPub), recipient.secretKey);\n            if (!shared) {\n                throw new Error(\"Failed to unwrap dataset key\");\n            }\n            // shared holds the XSalsa20-Poly1305 key bytes\n            if (shared.length !== (tweetnacl__WEBPACK_IMPORTED_MODULE_1___default().secretbox).keyLength) {\n                throw new Error(\"Unwrapped key has unexpected length\");\n            }\n            const decrypted = tweetnacl__WEBPACK_IMPORTED_MODULE_1___default().secretbox.open(new Uint8Array(ciphertext), new Uint8Array(nonce), shared);\n            if (!decrypted) {\n                throw new Error(\"Failed to decrypt ciphertext\");\n            }\n            const plain = new Uint8Array(decrypted);\n            setPlaintext(plain);\n            return plain;\n        } catch (e) {\n            const msg = e.message || \"Secure download failed\";\n            setError(msg);\n            throw e;\n        } finally{\n            setDownloading(false);\n        }\n    }, []);\n    return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>({\n            downloading,\n            error,\n            plaintext,\n            filename,\n            contentType,\n            downloadAndDecrypt,\n            reset\n        }), [\n        downloading,\n        error,\n        plaintext,\n        filename,\n        contentType,\n        downloadAndDecrypt,\n        reset\n    ]);\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (useSecureDownload);\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9ob29rcy91c2VTZWN1cmVEb3dubG9hZC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OzsrRUFFdUQ7QUFDN0I7QUFDRztBQUNhO0FBMkJuQyxTQUFTTTtJQUNkLE1BQU0sQ0FBQ0MsYUFBYUMsZUFBZSxHQUFHTiwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNLENBQUNPLE9BQU9DLFNBQVMsR0FBR1IsK0NBQVFBLENBQWdCO0lBQ2xELE1BQU0sQ0FBQ1MsV0FBV0MsYUFBYSxHQUFHViwrQ0FBUUEsQ0FBb0I7SUFDOUQsTUFBTSxDQUFDVyxVQUFVQyxZQUFZLEdBQUdaLCtDQUFRQSxDQUFnQjtJQUN4RCxNQUFNLENBQUNhLGFBQWFDLGVBQWUsR0FBR2QsK0NBQVFBLENBQWdCO0lBRTlELE1BQU1lLFFBQVFqQixrREFBV0EsQ0FBQztRQUN4QlEsZUFBZTtRQUNmRSxTQUFTO1FBQ1RFLGFBQWE7UUFDYkUsWUFBWTtRQUNaRSxlQUFlO0lBQ2pCLEdBQUcsRUFBRTtJQUVMLE1BQU1FLHFCQUFxQmxCLGtEQUFXQSxDQUFDLE9BQU9tQjtRQUM1QyxJQUFJLENBQUNBLFdBQVcsTUFBTSxJQUFJQyxNQUFNO1FBQ2hDWixlQUFlO1FBQ2ZFLFNBQVM7UUFDVEUsYUFBYTtRQUNiRSxZQUFZO1FBQ1pFLGVBQWU7UUFDZixJQUFJO1lBQ0Ysd0VBQXdFO1lBQ3hFLHVGQUF1RjtZQUN2RixNQUFNSyxZQUFZakIsb0RBQVEsQ0FBQ21CLE9BQU87WUFDbEMsTUFBTUMsd0JBQXdCQyxNQUFNQSxDQUFDQyxJQUFJLENBQUNMLFVBQVVNLFNBQVMsRUFBRUMsUUFBUSxDQUFDO1lBRXhFLE1BQU1DLE1BQU0sR0FBK0NDLE9BQTVDekIsbURBQVdBLEVBQUMsa0NBQThELE9BQTlCeUIsbUJBQW1CWDtZQUM5RSxNQUFNLEVBQUVZLElBQUksRUFBRSxHQUFHLE1BQU01Qiw2Q0FBS0EsQ0FBQzZCLElBQUksQ0FDL0JILEtBQ0E7Z0JBQUVMO1lBQXNCLEdBQ3hCO2dCQUFFUyxTQUFTO1lBQU87WUFHcEIsTUFBTUMsUUFBUVQsTUFBTUEsQ0FBQ0MsSUFBSSxDQUFDSyxLQUFLSSxTQUFTLEVBQUU7WUFDMUMsTUFBTUMsYUFBYVgsTUFBTUEsQ0FBQ0MsSUFBSSxDQUFDSyxLQUFLTSxjQUFjLEVBQUU7WUFDcEQsSUFBSU4sS0FBS08saUJBQWlCLEVBQUU7Z0JBQzFCeEIsWUFBWWlCLEtBQUtPLGlCQUFpQjtZQUNwQztZQUNBLElBQUlQLEtBQUtRLFlBQVksRUFBRTtnQkFDckJ2QixlQUFlZSxLQUFLUSxZQUFZO1lBQ2xDO1lBRUEsTUFBTUMsS0FBS1QsS0FBS1UsV0FBVztZQUMzQixNQUFNQyxlQUFlakIsTUFBTUEsQ0FBQ0MsSUFBSSxDQUFDYyxHQUFHRyxrQkFBa0IsRUFBRTtZQUN4RCxNQUFNQyx1QkFBdUJuQixNQUFNQSxDQUFDQyxJQUFJLENBQUNjLEdBQUdLLE1BQU0sRUFBRTtZQUNwRCxNQUFNQyxXQUFXckIsTUFBTUEsQ0FBQ0MsSUFBSSxDQUFDYyxHQUFHTyxRQUFRLEVBQUU7WUFFMUMsSUFBSUwsYUFBYU0sTUFBTSxLQUFLNUMsc0RBQVEsQ0FBQzZDLGVBQWUsRUFBRTtnQkFDcEQsTUFBTSxJQUFJN0IsTUFBTTtZQUNsQjtZQUVBLGdEQUFnRDtZQUNoRCxNQUFNOEIsU0FBUzlDLG9EQUFRLENBQUMrQyxJQUFJLENBQzFCLElBQUlDLFdBQVdSLHVCQUNmLElBQUlRLFdBQVdOLFdBQ2YsSUFBSU0sV0FBV1YsZUFDZnJCLFVBQVVnQyxTQUFTO1lBRXJCLElBQUksQ0FBQ0gsUUFBUTtnQkFDWCxNQUFNLElBQUk5QixNQUFNO1lBQ2xCO1lBRUEsK0NBQStDO1lBQy9DLElBQUk4QixPQUFPRixNQUFNLEtBQUs1Qyw0REFBYyxDQUFDbUQsU0FBUyxFQUFFO2dCQUM5QyxNQUFNLElBQUluQyxNQUFNO1lBQ2xCO1lBRUEsTUFBTW9DLFlBQVlwRCwwREFBYyxDQUFDK0MsSUFBSSxDQUNuQyxJQUFJQyxXQUFXaEIsYUFDZixJQUFJZ0IsV0FBV2xCLFFBQ2ZnQjtZQUVGLElBQUksQ0FBQ00sV0FBVztnQkFDZCxNQUFNLElBQUlwQyxNQUFNO1lBQ2xCO1lBRUEsTUFBTXFDLFFBQVEsSUFBSUwsV0FBV0k7WUFDN0I1QyxhQUFhNkM7WUFDYixPQUFPQTtRQUNULEVBQUUsT0FBT0MsR0FBRztZQUNWLE1BQU1DLE1BQU0sRUFBYUMsT0FBTyxJQUFJO1lBQ3BDbEQsU0FBU2lEO1lBQ1QsTUFBTUQ7UUFDUixTQUFVO1lBQ1JsRCxlQUFlO1FBQ2pCO0lBQ0YsR0FBRyxFQUFFO0lBRUwsT0FBT1AsOENBQU9BLENBQ1osSUFBTztZQUFFTTtZQUFhRTtZQUFPRTtZQUFXRTtZQUFVRTtZQUFhRztZQUFvQkQ7UUFBTSxJQUN6RjtRQUFDVjtRQUFhRTtRQUFPRTtRQUFXRTtRQUFVRTtRQUFhRztRQUFvQkQ7S0FBTTtBQUVyRjtBQUVBLCtEQUFlWCxpQkFBaUJBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2hvb2tzL3VzZVNlY3VyZURvd25sb2FkLnRzP2MzZDgiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcbmltcG9ydCBuYWNsIGZyb20gXCJ0d2VldG5hY2xcIjtcbmltcG9ydCB7IEJBQ0tFTkRfVVJMIH0gZnJvbSBcIkAvY29uc3RhbnRzXCI7XG5cbmludGVyZmFjZSBTZWN1cmVEb3dubG9hZFJlc3VsdCB7XG4gIGRvd25sb2FkaW5nOiBib29sZWFuO1xuICBlcnJvcjogc3RyaW5nIHwgbnVsbDtcbiAgcGxhaW50ZXh0OiBVaW50OEFycmF5IHwgbnVsbDtcbiAgZmlsZW5hbWU6IHN0cmluZyB8IG51bGw7XG4gIGNvbnRlbnRUeXBlOiBzdHJpbmcgfCBudWxsO1xuICBkb3dubG9hZEFuZERlY3J5cHQ6IChkYXRhc2V0SWQ6IHN0cmluZykgPT4gUHJvbWlzZTxVaW50OEFycmF5PjtcbiAgcmVzZXQ6ICgpID0+IHZvaWQ7XG59XG5cbmludGVyZmFjZSBTZWN1cmVEb3dubG9hZFJlc3BvbnNlIHtcbiAgYmxvYl9pZDogc3RyaW5nO1xuICBvcmlnaW5hbF9maWxlbmFtZT86IHN0cmluZyB8IG51bGw7XG4gIGNvbnRlbnRfdHlwZT86IHN0cmluZyB8IG51bGw7XG4gIG5vbmNlX2I2NDogc3RyaW5nO1xuICBjaXBoZXJ0ZXh0X2I2NDogc3RyaW5nO1xuICB3cmFwcGVkX2tleToge1xuICAgIHNlcnZlclB1YmxpY0tleUI2NDogc3RyaW5nO1xuICAgIG5vbmNlQjY0OiBzdHJpbmc7XG4gICAgYm94QjY0OiBzdHJpbmc7XG4gICAgYWxnb3JpdGhtOiBzdHJpbmc7XG4gIH07XG4gIGFsZ29yaXRobTogc3RyaW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlU2VjdXJlRG93bmxvYWQoKTogU2VjdXJlRG93bmxvYWRSZXN1bHQge1xuICBjb25zdCBbZG93bmxvYWRpbmcsIHNldERvd25sb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3BsYWludGV4dCwgc2V0UGxhaW50ZXh0XSA9IHVzZVN0YXRlPFVpbnQ4QXJyYXkgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2ZpbGVuYW1lLCBzZXRGaWxlbmFtZV0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2NvbnRlbnRUeXBlLCBzZXRDb250ZW50VHlwZV0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICBjb25zdCByZXNldCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXREb3dubG9hZGluZyhmYWxzZSk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gICAgc2V0UGxhaW50ZXh0KG51bGwpO1xuICAgIHNldEZpbGVuYW1lKG51bGwpO1xuICAgIHNldENvbnRlbnRUeXBlKG51bGwpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgZG93bmxvYWRBbmREZWNyeXB0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKGRhdGFzZXRJZDogc3RyaW5nKTogUHJvbWlzZTxVaW50OEFycmF5PiA9PiB7XG4gICAgaWYgKCFkYXRhc2V0SWQpIHRocm93IG5ldyBFcnJvcihcImRhdGFzZXQgaWQgaXMgcmVxdWlyZWRcIik7XG4gICAgc2V0RG93bmxvYWRpbmcodHJ1ZSk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gICAgc2V0UGxhaW50ZXh0KG51bGwpO1xuICAgIHNldEZpbGVuYW1lKG51bGwpO1xuICAgIHNldENvbnRlbnRUeXBlKG51bGwpO1xuICAgIHRyeSB7XG4gICAgICAvLyBHZW5lcmF0ZSBhbiBlcGhlbWVyYWwgcmVjaXBpZW50IGtleXBhaXIgZm9yIHRoaXMgZG93bmxvYWQgKGRldi1vbmx5KS5cbiAgICAgIC8vIEluIGEgcmVhbCBhcHAgdGhlIHVzZXIgd291bGQgaGF2ZSBhIGxvbmctbGl2ZWQgWDI1NTE5IGtleSBwYWlyIHRpZWQgdG8gdGhlaXIgd2FsbGV0LlxuICAgICAgY29uc3QgcmVjaXBpZW50ID0gbmFjbC5ib3gua2V5UGFpcigpO1xuICAgICAgY29uc3QgcmVjaXBpZW50UHVibGljS2V5QjY0ID0gQnVmZmVyLmZyb20ocmVjaXBpZW50LnB1YmxpY0tleSkudG9TdHJpbmcoXCJiYXNlNjRcIik7XG5cbiAgICAgIGNvbnN0IHVybCA9IGAke0JBQ0tFTkRfVVJMfS9hcGkvZGF0YXNldHMvc2VjdXJlLWRvd25sb2FkLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFzZXRJZCl9YDtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MucG9zdDxTZWN1cmVEb3dubG9hZFJlc3BvbnNlPihcbiAgICAgICAgdXJsLFxuICAgICAgICB7IHJlY2lwaWVudFB1YmxpY0tleUI2NCB9LFxuICAgICAgICB7IHRpbWVvdXQ6IDIwXzAwMCB9XG4gICAgICApO1xuXG4gICAgICBjb25zdCBub25jZSA9IEJ1ZmZlci5mcm9tKGRhdGEubm9uY2VfYjY0LCBcImJhc2U2NFwiKTtcbiAgICAgIGNvbnN0IGNpcGhlcnRleHQgPSBCdWZmZXIuZnJvbShkYXRhLmNpcGhlcnRleHRfYjY0LCBcImJhc2U2NFwiKTtcbiAgICAgIGlmIChkYXRhLm9yaWdpbmFsX2ZpbGVuYW1lKSB7XG4gICAgICAgIHNldEZpbGVuYW1lKGRhdGEub3JpZ2luYWxfZmlsZW5hbWUpO1xuICAgICAgfVxuICAgICAgaWYgKGRhdGEuY29udGVudF90eXBlKSB7XG4gICAgICAgIHNldENvbnRlbnRUeXBlKGRhdGEuY29udGVudF90eXBlKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZWsgPSBkYXRhLndyYXBwZWRfa2V5O1xuICAgICAgY29uc3QgZXBoZW1lcmFsUHViID0gQnVmZmVyLmZyb20oZWsuc2VydmVyUHVibGljS2V5QjY0LCBcImJhc2U2NFwiKTtcbiAgICAgIGNvbnN0IHdyYXBwZWRLZXlDaXBoZXJ0ZXh0ID0gQnVmZmVyLmZyb20oZWsuYm94QjY0LCBcImJhc2U2NFwiKTtcbiAgICAgIGNvbnN0IGtleU5vbmNlID0gQnVmZmVyLmZyb20oZWsubm9uY2VCNjQsIFwiYmFzZTY0XCIpO1xuXG4gICAgICBpZiAoZXBoZW1lcmFsUHViLmxlbmd0aCAhPT0gbmFjbC5ib3gucHVibGljS2V5TGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZXBoZW1lcmFsIHB1YmxpYyBrZXkgbGVuZ3RoXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBEZXJpdmUgc2hhcmVkIHNlY3JldCB1c2luZyBYMjU1MTkgKE5hQ2wgYm94KS5cbiAgICAgIGNvbnN0IHNoYXJlZCA9IG5hY2wuYm94Lm9wZW4oXG4gICAgICAgIG5ldyBVaW50OEFycmF5KHdyYXBwZWRLZXlDaXBoZXJ0ZXh0KSxcbiAgICAgICAgbmV3IFVpbnQ4QXJyYXkoa2V5Tm9uY2UpLFxuICAgICAgICBuZXcgVWludDhBcnJheShlcGhlbWVyYWxQdWIpLFxuICAgICAgICByZWNpcGllbnQuc2VjcmV0S2V5XG4gICAgICApO1xuICAgICAgaWYgKCFzaGFyZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHVud3JhcCBkYXRhc2V0IGtleVwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gc2hhcmVkIGhvbGRzIHRoZSBYU2Fsc2EyMC1Qb2x5MTMwNSBrZXkgYnl0ZXNcbiAgICAgIGlmIChzaGFyZWQubGVuZ3RoICE9PSBuYWNsLnNlY3JldGJveC5rZXlMZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW53cmFwcGVkIGtleSBoYXMgdW5leHBlY3RlZCBsZW5ndGhcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRlY3J5cHRlZCA9IG5hY2wuc2VjcmV0Ym94Lm9wZW4oXG4gICAgICAgIG5ldyBVaW50OEFycmF5KGNpcGhlcnRleHQpLFxuICAgICAgICBuZXcgVWludDhBcnJheShub25jZSksXG4gICAgICAgIHNoYXJlZFxuICAgICAgKTtcbiAgICAgIGlmICghZGVjcnlwdGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBkZWNyeXB0IGNpcGhlcnRleHRcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBsYWluID0gbmV3IFVpbnQ4QXJyYXkoZGVjcnlwdGVkKTtcbiAgICAgIHNldFBsYWludGV4dChwbGFpbik7XG4gICAgICByZXR1cm4gcGxhaW47XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc3QgbXNnID0gKGUgYXMgRXJyb3IpLm1lc3NhZ2UgfHwgXCJTZWN1cmUgZG93bmxvYWQgZmFpbGVkXCI7XG4gICAgICBzZXRFcnJvcihtc2cpO1xuICAgICAgdGhyb3cgZTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0RG93bmxvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIHJldHVybiB1c2VNZW1vKFxuICAgICgpID0+ICh7IGRvd25sb2FkaW5nLCBlcnJvciwgcGxhaW50ZXh0LCBmaWxlbmFtZSwgY29udGVudFR5cGUsIGRvd25sb2FkQW5kRGVjcnlwdCwgcmVzZXQgfSksXG4gICAgW2Rvd25sb2FkaW5nLCBlcnJvciwgcGxhaW50ZXh0LCBmaWxlbmFtZSwgY29udGVudFR5cGUsIGRvd25sb2FkQW5kRGVjcnlwdCwgcmVzZXRdXG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHVzZVNlY3VyZURvd25sb2FkO1xuXG5cblxuXG4iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VNZW1vIiwidXNlU3RhdGUiLCJheGlvcyIsIm5hY2wiLCJCQUNLRU5EX1VSTCIsInVzZVNlY3VyZURvd25sb2FkIiwiZG93bmxvYWRpbmciLCJzZXREb3dubG9hZGluZyIsImVycm9yIiwic2V0RXJyb3IiLCJwbGFpbnRleHQiLCJzZXRQbGFpbnRleHQiLCJmaWxlbmFtZSIsInNldEZpbGVuYW1lIiwiY29udGVudFR5cGUiLCJzZXRDb250ZW50VHlwZSIsInJlc2V0IiwiZG93bmxvYWRBbmREZWNyeXB0IiwiZGF0YXNldElkIiwiRXJyb3IiLCJyZWNpcGllbnQiLCJib3giLCJrZXlQYWlyIiwicmVjaXBpZW50UHVibGljS2V5QjY0IiwiQnVmZmVyIiwiZnJvbSIsInB1YmxpY0tleSIsInRvU3RyaW5nIiwidXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZGF0YSIsInBvc3QiLCJ0aW1lb3V0Iiwibm9uY2UiLCJub25jZV9iNjQiLCJjaXBoZXJ0ZXh0IiwiY2lwaGVydGV4dF9iNjQiLCJvcmlnaW5hbF9maWxlbmFtZSIsImNvbnRlbnRfdHlwZSIsImVrIiwid3JhcHBlZF9rZXkiLCJlcGhlbWVyYWxQdWIiLCJzZXJ2ZXJQdWJsaWNLZXlCNjQiLCJ3cmFwcGVkS2V5Q2lwaGVydGV4dCIsImJveEI2NCIsImtleU5vbmNlIiwibm9uY2VCNjQiLCJsZW5ndGgiLCJwdWJsaWNLZXlMZW5ndGgiLCJzaGFyZWQiLCJvcGVuIiwiVWludDhBcnJheSIsInNlY3JldEtleSIsInNlY3JldGJveCIsImtleUxlbmd0aCIsImRlY3J5cHRlZCIsInBsYWluIiwiZSIsIm1zZyIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/hooks/useSecureDownload.ts\n"));

/***/ })

});